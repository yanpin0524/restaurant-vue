(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"album py-5 bg-light"},[i("div",{staticClass:"container"},[i("UserProfileCard",{attrs:{"initial-profile":t.profile,"initial-is-followed":t.isFollowed},on:{"after-click-followed":t.fetchUser}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4"},[i("UserFollowingsCard",{attrs:{"initial-followings":t.profile.Followings}}),i("br"),i("UserFollowersCard",{attrs:{"initial-followers":t.profile.Followers}})],1),i("div",{staticClass:"col-md-8"},[i("UserCommentsCard",{attrs:{"initial-comments":t.profile.Comments}}),i("br"),i("UserFavoritedRestaurantsCard",{attrs:{"initial-favorited":t.profile.FavoritedRestaurants}})],1)])],1)])},a=[],r=function(){var t=this,i=t._self._c;return i("div",{staticClass:"card mb-3"},[i("div",{staticClass:"row no-gutters"},[i("div",{staticClass:"col-md-4"},[i("img",{attrs:{src:t.profile.image||"https://i.imgur.com/58ImzMM.png",width:"100%",height:"100%"}})]),i("div",{staticClass:"col-md-8"},[i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),i("p",{staticClass:"card-text"},[t._v(" "+t._s(t.profile.email)+" ")]),i("ul",{staticClass:"list-unstyled list-inline"},[i("li",[i("strong",[t._v(t._s(t.ReviewedRestaurantCounts))]),t._v(" 已評論餐廳")]),i("li",[i("strong",[t._v(t._s(t.profile.FavoritedRestaurants.length))]),t._v(" 收藏的餐廳")]),i("li",[i("strong",[t._v(t._s(t.profile.Followings.length))]),t._v(" followings (追蹤者)")]),i("li",[i("strong",[t._v(t._s(t.profile.Followers.length))]),t._v(" followers (追隨者)")])]),t.currentUser.id===t.profile.id?i("p",[i("router-link",{attrs:{to:{name:"users-edit",params:{id:t.profile.id}}}},[i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("edit")])])],1):i("p",[t.isFollowed?i("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.deleteFollowed(t.profile.id)}}},[t._v(" 取消追蹤 ")]):i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.addFollowed(t.profile.id)}}},[t._v(" 追蹤 ")])])])])])])},l=[],o=(s("d9e2"),s("4cce")),n=s("2fa3"),d=s("2f62"),c={name:"UserProfileCard",props:{initialProfile:{type:Object,required:!0},initialIsFollowed:{type:Boolean,required:!1}},data(){return{profile:{id:-1,name:"",email:"",password:"",isAdmin:!1,image:null,createdAt:"",updatedAt:"",Comments:[],FavoritedRestaurants:[],Followers:[],Followings:[]},isFollowed:!1}},computed:{ReviewedRestaurantCounts(){if(!this.profile.Comments.length)return 0;const t=this.profile.Comments.map(t=>t.RestaurantId),i=[...new Set(t)].length;return i},...Object(d["b"])(["currentUser","isAuthenticated"])},watch:{initialProfile(t){this.profile={...this.profile,...t}},initialIsFollowed(t){this.isFollowed=t}},methods:{async addFollowed(t){try{const{data:i}=await o["a"].addFollowing({userId:t});if("error"===i.status)throw new Error(i.message);this.$emit("after-click-followed",t),this.isFollowed=!0}catch(i){n["a"].fire({icon:"error",title:"Unable to follow this user, Please try again"})}},async deleteFollowed(t){try{const{data:i}=await o["a"].deleteFollowing({userId:t});if("error"===i.status)throw new Error(i.message);this.$emit("after-click-followed",t),this.isFollowed=!1}catch(i){n["a"].fire({icon:"error",title:"Unable to cancel follow this user, Please try again"})}}}},u=c,m=s("2877"),p=Object(m["a"])(u,r,l,!1,null,null,null),f=p.exports,h=function(){var t=this,i=t._self._c;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.initialFollowings?t.initialFollowings.length:0))]),t._v(" followings (追蹤者) ")]),i("div",{staticClass:"card-body"},t._l(t.initialFollowings,(function(t){return i("router-link",{key:t.id,staticClass:"mr-1",attrs:{to:{name:"users-profile",params:{id:t.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.image||"https://i.imgur.com/58ImzMM.png",width:"60",height:"60"}})])})),1)])},w=[],v={props:{initialFollowings:{type:Array}}},g=v,C=Object(m["a"])(g,h,w,!1,null,null,null),_=C.exports,F=function(){var t=this,i=t._self._c;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.initialFollowers?t.initialFollowers.length:0))]),t._v(" followers (追隨者) ")]),i("div",{staticClass:"card-body"},t._l(t.initialFollowers,(function(t){return i("router-link",{key:t.id,staticClass:"mr-1",attrs:{to:{name:"users-profile",params:{id:t.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.image||"https://i.imgur.com/58ImzMM.png",width:"60",height:"60"}})])})),1)])},b=[],y={props:{initialFollowers:{type:Array}}},U=y,R=Object(m["a"])(U,F,b,!1,null,null,null),k=R.exports,I=function(){var t=this,i=t._self._c;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.CommentRestaurantList.length))]),t._v(" 已評論餐廳 ")]),i("div",{staticClass:"card-body"},t._l(t.CommentRestaurantList,(function(t){return i("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.Restaurant.id}}}},[i("img",{staticClass:"avatar mr-1 mb-1",attrs:{src:t.Restaurant.image,width:"60",height:"60"}})])})),1)])},P=[],j={props:{initialComments:{type:Array}},computed:{CommentRestaurantList(){if(!this.initialComments)return[];const t=new Set,i=this.initialComments.filter(i=>!t.has(i.RestaurantId)&&t.add(i.RestaurantId));return i}}},A=j,O=Object(m["a"])(A,I,P,!1,null,null,null),x=O.exports,M=function(){var t=this,i=t._self._c;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.initialFavorited?t.initialFavorited.length:0))]),t._v(" 收藏的餐廳 ")]),i("div",{staticClass:"card-body"},t._l(t.initialFavorited,(function(t){return i("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.id}}}},[i("img",{staticClass:"avatar mr-1",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},z=[],L={props:{initialFavorited:{type:Array}}},$=L,q=Object(m["a"])($,M,z,!1,null,null,null),D=q.exports,E={name:"UserProfile",components:{UserProfileCard:f,UserFollowingsCard:_,UserFollowersCard:k,UserCommentsCard:x,UserFavoritedRestaurantsCard:D},data(){return{profile:{},isFollowed:!1}},methods:{async fetchUser(t){try{const{data:i}=await o["a"].get({userId:t});this.profile=i.profile,this.isFollowed=i.isFollowed}catch(i){n["a"].fire({icon:"error",title:"Unable to get user data, Please try again."})}}},created(){const{id:t}=this.$route.params;this.fetchUser(t)},beforeRouteUpdate(t,i,s){const{id:e}=t.params;this.fetchUser(e),s()}},J=E,S=Object(m["a"])(J,e,a,!1,null,null,null);i["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.d68a6013.js.map